<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hindi Spell Checker</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        textarea { width: 80%; height: 150px; margin: 10px 0; font-size: 18px; }
        button { padding: 10px; font-size: 16px; cursor: pointer; }
        #spellCheckedText { font-size: 18px; color: black; margin-top: 10px; border: 1px solid #ccc; padding: 10px; min-height: 50px; }
        .highlight { color: red; font-weight: bold; border-bottom: 2px dotted red; cursor: pointer; }
        #debugOutput { border: 1px solid #ccc; padding: 10px; max-height: 150px; overflow: auto; text-align: left; font-size: 14px; background: #f9f9f9; }
    </style>
</head>
<body>

    <h2>Hindi Spell Checker</h2>
    
    <textarea id="unicodeText" placeholder="अपना हिंदी टेक्स्ट यहाँ डालें..."></textarea><br>
    <button onclick="checkSpelling()">Check Spelling</button>
    
    <h3>Spell Checked Text:</h3>
    <div id="spellCheckedText" contenteditable="true"></div>

    <h3>Debug Output:</h3>
    <pre id="debugOutput"></pre>

    <script>
        async function checkSpelling() {
            let text = document.getElementById("unicodeText").value;
            let apiUrl = "https://practice-production-e8b9.up.railway.app/spell-check";  // LanguageTool API URL

            try {
                let response = await fetch(apiUrl, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ text: text })
                });

                if (!response.ok) {
                    throw new Error("Server Response: " + response.status + " " + response.statusText);
                }

                let result = await response.json();

                document.getElementById("debugOutput").textContent = JSON.stringify(result, null, 2);

                let checkedText = result.checkedText.map(wordObj => {
                    if (!wordObj.correct && wordObj.suggestions.length > 0) {
                        return `<span class="highlight" onclick="replaceWord(this, '${wordObj.suggestions[0]}')">${wordObj.word}</span>`;
                    } else {
                        return wordObj.word;
                    }
                }).join(" ");

                document.getElementById("spellCheckedText").innerHTML = checkedText;
            } catch (error) {
                document.getElementById("debugOutput").textContent = "Error: " + error.message;
            }
        }

        function replaceWord(element, correctWord) {
            element.innerText = correctWord;
            element.classList.remove("highlight");
        }
    </script>

</body>
</html>
